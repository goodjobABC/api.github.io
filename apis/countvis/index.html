<!DOCTYPE html>
<html>
  <!-- 单子逸编写!-->
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <h1>如何使用统计访问量api?</h1>
    <p>首先，在要统计的页面的"<head></head>"标签里加入如下代码：</p>
    <pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://goodjobabc.github.io/api.github.io/apis/countvis/count.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">    <span class="token comment">&lt;!-- 使用 HTML 和 JavaScript 调用 API --&gt;</span>
</span><span class="code-line line-number" line="4">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line line-number" line="5"><span class="token script"><span class="token language-javascript">        <span class="token comment">// 初始化计数器</span>
</span></span></span><span class="code-line line-number" line="6"><span class="token script"><span class="token language-javascript">        <span class="token function">initCounting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="7"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line line-number" line="8"><span class="token script"><span class="token language-javascript">        <span class="token comment">// 定时更新访问量</span>
</span></span></span><span class="code-line line-number" line="9"><span class="token script"><span class="token language-javascript">        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="10"><span class="token script"><span class="token language-javascript">            <span class="token function">countVisitors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="11"><span class="token script"><span class="token language-javascript">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每隔1秒更新一次</span>
</span></span></span><span class="code-line line-number" line="12"><span class="token script"><span class="token language-javascript">
</span></span></span><span class="code-line line-number" line="13"><span class="token script"><span class="token language-javascript">        <span class="token comment">// 示例：调用 API 获取最近的访客信息</span>
</span></span></span><span class="code-line line-number" line="14"><span class="token script"><span class="token language-javascript">        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8080/api/getRecentVisitors'</span><span class="token punctuation">)</span><span class="token comment">//换成你的域名</span>
</span></span></span><span class="code-line line-number" line="15"><span class="token script"><span class="token language-javascript">            <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token arrow operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line line-number" line="16"><span class="token script"><span class="token language-javascript">            <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="17"><span class="token script"><span class="token language-javascript">                <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'最近10次访问的访客信息:'</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token property-access">recentVisitors</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="18"><span class="token script"><span class="token language-javascript">            <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span></span><span class="code-line line-number" line="19"><span class="token script"><span class="token language-javascript">            <span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span></span></span><span class="code-line line-number" line="20"><span class="token script"><span class="token language-javascript">                <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'API 请求错误:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="21"><span class="token script"><span class="token language-javascript">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span></span><span class="code-line line-number" line="22"><span class="token script"><span class="token language-javascript">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</span></code></pre>
  </body>
</html>
